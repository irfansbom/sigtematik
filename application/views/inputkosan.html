<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
        integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin=""></script>
    <title>Area Stis</title>

    <style>
        .topnav {
            background-color: #333;
            overflow: hidden;
        }

        body,
        html {
            top: 0;
            margin: 0;
            scroll-behavior: smooth;
        }

        /* Style the links inside the navigation bar */
        .topnav a {
            float: left;
            color: #f2f2f2;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px;
        }

        /* Change the color of links on hover */
        .topnav a:hover {
            background-color: #ddd;
            color: black;
        }

        /* Add a color to the active/current link */
        .topnav a.active {
            background-color: #4CAF50;
            color: white;
        }

        #map {
            position: fixed;
            width: 50%;
            height: 91.4%;
            border: 3px solid #73AD21;
        }

        input[type=text],
        select,
        textarea {
            width: 100%;
            /* Full width */
            padding: 12px;
            /* Some padding */
            border: 1px solid #ccc;
            /* Gray border */
            border-radius: 4px;
            /* Rounded borders */
            box-sizing: border-box;
            /* Make sure that padding and width stays in place */
            margin-top: 6px;
            /* Add a top margin */
            margin-bottom: 16px;
            /* Bottom margin */
            resize: vertical
                /* Allow the user to vertically resize the textarea (not horizontally) */
        }

        .input2[type=text] {
            width: 40%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            margin-top: 6px;
            margin-bottom: 16px;
            resize: horizontal;
        }

        .button {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .button2 {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            justify-content: center;
            display: flex;
        }


        /* Style the submit button with a specific background color etc */
        input[type=submit] {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        /* When moving the mouse over the submit button, add a darker green color */
        input[type=submit]:hover {
            background-color: #45a049;
        }

        /* Add a background color and some padding around the form */
        .container {
            position: absolute;
            right: 0;
            /* margin-right: 8px; */
            width: 47%;
            height: 85%;
            /* border-radius: 5px; */
            background-color: #f2f2f2;
            padding: 20px;
            overflow: auto;
            border: 3px solid #73AD21;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            padding: 6px;
            /* width: 10px; */
        }
    </style>

</head>

<body>
    <div class="topnav">
        <a href="home">Home</a>
        <a href="Tematik">Wilayah Kos</a>
        <a href="geotag">Cari Kos</a>
        <a class="active" href="form">Input Kos</a>
    </div>
    <div id="map"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="zxc.js"></script>
    <script>
        var house = L.icon({
            iconUrl: 'images/marker.png',
            iconSize: [37, 37],
            iconAnchor: [16, 37],
            popupAnchor: [0, -28]
        });
        console.log(map_landmark);
        jQuery.extend({
            getValues: function (url) {
                var result = null;
                $.ajax({
                    url: url,
                    type: 'get',
                    dataType: 'json',
                    async: false,
                    success: function (data) {
                        result = data;
                    }
                });
                return result;
            }
        });
        $(document).ready(function () {
            $('input[type="file"]').change(function (e) {
                var fileName = e.target.files[0].name;
                document.getElementById('filename').value = fileName;
            });
        });
        var map = L.map('map').setView([-6.231196, 106.869858, 86888], 15.5);
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        }).addTo(map);
        var layerdasar = $.getValues("api/Spasial/datalengkap");		//full semua termasuk shp isinya 
       geojsonlayer = L.geoJSON(layerdasar, {
            color: 'green',
            fillColor: '#fffff',
            fillOpacity: 0.5,
            pointToLayer: function (feature, latlng) {
                return L.marker(latlng, { icon: house });
            }
        });
        geojsonlayer.addTo(map);

        var x = document.getElementById("longitude");
        var y = document.getElementById("latitude");

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
                map.removeLayer(geojsonlayer);
                geojsonlayer = L.geoJSON([map_landmark,layerdasar], {
                    color: 'green',
                    fillColor: '#fffff',
                    fillOpacity: 0.5,
                    pointToLayer: function (feature, latlng) {
                        return L.marker(latlng, { icon: house });
                    }
                });
                geojsonlayer.addTo(map);
            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }
        function showPosition(position) {
            document.getElementById("latitude").value = position.coords.latitude;
            document.getElementById("longitude").value = position.coords.longitude;
            var layerdasar = $.getValues("api/Spasial/nocluster/" + position.coords.longitude + "/" + position.coords.latitude);
            document.getElementById("nocluster").value = layerdasar.id;
            document.getElementById("wilayah").value = layerdasar.namawilaya;
            map_landmark.features[0].geometry.coordinates[0] = position.coords.longitude;
            map_landmark.features[0].geometry.coordinates[1] = position.coords.latitude;
        }
        function doPreview() {
            form = document.getElementById('idOfForm');
            form.target = 'api/Spasial/inputkos';
            form.action = 'api/Spasial/inputkos';
            form.submit();
            form.action = 'api/Spasial/inputkos';
            form.target = 'api/Spasial/inputkos';
        }

    </script>


    <div class="container">
        <form action="api/Spasial/inputkos" enctype="multipart/form-data" id="idOfForm" method="POST">
            <label for="alamat">Lokasi/Alamat</label>
            <input type="text" id="alamat" name="alamat" placeholder="Alamat..">
            <label for="jenis">Jenis</label>
            <select id="jenis" name="jenis">
                <option value="Kosan">Kosan</option>
                <option value="Kontrakan">Kontrakan</option>
            </select>
            <label for="longitude">Longitude, Latitude</label>
            <br />
            <input class="input2" type="text" id="longitude" name="longitude" placeholder="longitude(auto)" readonly>
            <input class="input2" type="text" id="latitude" name="latitude" placeholder="latitude(auto)" readonly>
            <button class="button" type="button" onclick="getLocation()">Get Location</button>
            <br />
            <label>No Cluster, Nama</label>
            <br />
            <input class="input2" type="text" id="nocluster" name="nocluster" placeholder="cluster(auto)" readonly>
            <input class="input2" type="text" id="wilayah" name="wilayah" placeholder="cluster(auto)" readonly>
            <br />
            <label> karakteristik</label>
            <br />
            <input type="text" id="karakteristik" name="karakteristik">
            <br />
            <label> pemilik</label>
            <br />
            <input type="text" id="pemilik" name="pemilik">
            <br />
            <label> penghuni kos</label>
            <br />
            <input type="text" id="penghuni kos" name="penghunikos">
            <br />
            <label> kapasitas</label>
            <br />
            <input type="text" id="kapasitas" name="kapasitas">
            <br />
            <label> luas</label>
            <br />
            <input type="text" id="luas" name="luas">
            <br />
            <label> harga</label>
            <br />
            <input type="text" id="harga" name="harga">
            <br />
            <table>
                <tr>
                    <td>jendela</td>
                    <td><input type="radio" id="jendela" name="jendela" value="ada">Ada</td>
                    <td><input type="radio" id="jendela" name="jendela" value="tidak">Tidak Ada</td>
                </tr>

                <tr>
                    <td>wc</td>
                    <td><input type="radio" id="wc" name="wc" value="ada">Ada</td>
                    <td><input type="radio" id="wc" name="wc" value="tidak">Tidak Ada</td>
                </tr>

                <tr>
                    <td>ranjang</td>
                    <td><input type="radio" id="ranjang" name="ranjang" value="ada">Ada</td>
                    <td><input type="radio" id="ranjang" name="ranjang" value="tidak">Tidak Ada</td>
                </tr>

                <tr>
                    <td>Lemari</td>
                    <td><input type="radio" id="lemari" name="lemari" value="ada">Ada</td>
                    <td><input type="radio" id="lemari" name="lemari" value="tidak">Tidak Ada</td>
                </tr>

                <tr>
                    <td>Meja</td>
                    <td><input type="radio" id="meja" name="meja" value="ada">Ada</td>
                    <td><input type="radio" id="meja" name="meja" value="tidak">Tidak Ada</td>
                </tr>

                <tr>
                    <td>Kursi</td>
                    <td><input type="radio" id="kursi" name="kursi" value="ada">Ada</td>
                    <td><input type="radio" id="kursi" name="kursi" value="tidak">Tidak Ada</td>
                </tr>

                <tr>
                    <td>AC</td>
                    <td> <input type="radio" id="ac" name="ac" value="ada">Ada</td>
                    <td><input type="radio" id="ac" name="ac" value="tidak">Tidak Ada</td>
                </tr>
            </table>
            <br />
            <label>Masukan Foto</label>
            <input type="file" name="userfile" accept="image/*">
            <input type="text" name="filename" id="filename" readonly>
            <br />
            <br />
            <button class="button2" onclick="doPreview()" onclick="alert('Mengirim Data Ke Server    ')">Submit</button>

        </form>
    </div>
</body>

</html>